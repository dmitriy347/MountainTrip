<!--Детали поездки-->
{% extends 'base.html' %}

{% block title %}Поездка — SkiTrip Journal{% endblock %}

{% block content %}
<h2 class="mb-1">{{ trip.resort.name }}</h2>
<p class="text-muted">
    {{ trip.start_date }} — {{ trip.end_date }}
</p>

{% if trip.comment %}
<div class="p-3 mb-4 bg-light rounded">
    {{ trip.comment }}
</div>
{% endif %}

{% if trip.user == request.user %}
<div class="mb-4">
    <a href="{% url 'trip_edit' trip.id %}" class="btn btn-sm btn-outline-secondary">
        Редактировать
    </a>
    <a href="{% url 'trip_delete' trip.id %}" class="btn btn-sm btn-outline-danger">
        Удалить
    </a>
</div>
{% endif %}

<hr>
<h4 class="mt-4">Фотографии</h4>

{% if media_list %}
    <div class="row">
        {% for photo in media_list %}
            <div class="col-md-4 mb-3">
                <a href="{{ photo.image.url }}" target="_blank">
                    {% if photo.thumbnail %}
                        <img src="{{ photo.thumbnail.url }}" class="img-fluid trip-image" alt="Фото поездки">
                    {% else %}
                        <img src="{{ photo.image.url }}" class="img-fluid trip-image" alt="Фото поездки">
                    {% endif %}
                </a>
                {% if trip.user == request.user %}
                    <a href="{% url 'trip_media_delete' photo.id %}" class="btn btn-sm btn-outline-danger">
                        Удалить
                    </a>
                {% endif %}
            </div>
        {% endfor %}
    </div>
{% else %}
    <p>Фотографии не добавлены.</p>
{% endif %}

{% if trip.user == request.user %}
    <a href="{% url 'trip_media_add' trip.id %}" class="btn btn-outline-primary mt-3">
        Добавить фото
    </a>
{% endif %}
{% endblock %}